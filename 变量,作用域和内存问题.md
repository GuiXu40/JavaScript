<p id="title"></p>

# :strawberry:变量,作用域,及内存问题

<a href="#p1">:peach:基本类型和引用类型的值</a><br>
<a href="#p2">:peach:执行环境及作用域</a><br>
<a href="#p3">:peach:垃圾收集</a><br>
<p id="p1"></p>

## :banana:基本类型和引用类型的值 
<a href="#title">:sweet_potato:回到目录</a><br>
ECMAScript可能包含两种不同数据结构的值:基本类型值(简单的数据段)和引用类型的值(由多个值组成的对象).引用类型的值是保存在内存的对象,与其他语言不同,JavaScript是不允许直接访问内存的位置,也就是说不能直接操作对象的内存空间,实际上是在操作对象的引用而不是实际的对象,为此,引用类型的值是按引用访问的
#### :corn:动态的属性
引用类型和基本类型的定义方式是一样的:创建一个变量并为该变量赋值,对于引用类型的值,可以添加或删除属性和方法
```JavaScript
var person=new Object();
person.name="guixu";
alert(person.name);
```
但是,不能为基本类型添加属性,尽管不会导致任何错误
```JavaScript
var name="guixu";
name.age=27;
alert(name.age);
```
#### :corn:复制变量值
除了保存的方式不同之外,再从一个变量向另一个变量复制基本类型值和引用类型值时,也存在不同.比较:<br>
```JavaScript
var num1=5;
var num2=num1;
//使用num1的值来初始化num2时,num2中也保存了值5,但num1和num2中的5是完全独立的
```
当从一个变量向另一个变量复制引用类型的值时,同样也复制一份,不同的是,这个值的副本实际上是一个指针,两个变量实际上引用同一个指针
```JavaScript
var obj1=new Object();
var obj2=obj1;
obj1.name="guixu";
alert(obj2.name);
```
#### :corn:传递参数
ECMAScript中所有函数的参数都是按照按值传递的(访问变量是有按值和按引用两种方式,而参数只能按值传递)
```JavaScript
function addTen(num){
    num += 10;
    return num;
}
var count = 20;
var result = addTen(count);
alert(count);
alert(result);
```
这个还比较好理解,对于对象而言,就比较难以理解
```JavaScript
function setName(obj){
    obj.name="guixu";
}
var person = new Object();
setName(person);
alert(person.name);  //guixu
```
按照这个例子:会错误的认为:在局部作用域中修改的对象会在全局作用域中反映出来,就说明参数是按照引用传递的.再看下面这个例子:
```JavaScript
function setName(obj){
    obj.name="guixu";
    obj = new Object();
    obj.name="lalala";
}
var person = new Object();
setName(person);
alert(person.name);  //"guixu"
```
这说明,即使在函数内部修改了参数的值,但原始的引用保持不变.实际上,当在函数内部重写obj时,这个变量的引用的就是一个局部变量了,而这个局部变量会在函数执行后被销毁
#### :corn:检测类型
在检测基本数据类型时typeof是非常得力的助手,但在检测引用类型的值时,我们使用instanceof操作符
```JavaScript
result = variable instanceof constructor;
```
如果变量是给定引用类型的实例,那么instanceof就会返回true
<p id="p2"></p>

## :banana:执行环境及作用域 
<a href="#title">:sweet_potato:回到目录</a><br>
#### :corn:延长作用域链
#### :corn:没有块级作用域
<p id="p3"></p>

## :banana:垃圾收集
<a href="#title">:sweet_potato:回到目录</a><br>
#### :corn:标记清理
#### :corn:引用计数
#### :corn:性能问题
#### :corn:管理内存
